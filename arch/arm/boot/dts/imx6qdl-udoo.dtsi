/*
 * Copyright 2012 Freescale Semiconductor, Inc.
 * Copyright 2011 Linaro Ltd.
 *
 * The code contained herein is licensed under the GNU General Public
 * License. You may obtain a copy of the GNU General Public License
 * Version 2 or later at the following locations:
 *
 * http://www.opensource.org/licenses/gpl-license.html
 * http://www.gnu.org/copyleft/gpl.html
 */

/ {
	aliases {
		mxcfb0 = &mxcfb1;
		mxcfb1 = &mxcfb2;
		mxcfb2 = &mxcfb3;
		mxcfb3 = &mxcfb4;
	};

	memory {
                reg = <0x10000000 0x40000000>;

	};

//	clocks {
//		codec_osc: codec_osc {
//			compatible = "fixed-clock";
//			#clock-cells = <0>;
//			clock-frequency = <24576000>;
//		};
//	};
//
//	gpio-keys {
//		compatible = "gpio-keys";
//                power {
//                        label = "Power Button";
//                        gpios = <&gpio3 29 0>;
//                        linux,code = <116>; /* KEY_POWER */
//                        gpio-key,wakeup;
//                };
//
//                volume-up {
//                        label = "Volume Up";
//                        gpios = <&gpio1 4 0>;
//                        linux,code = <115>; /* KEY_VOLUMEUP */
//                };
//
//                volume-down {
//                        label = "Volume Down";
//                        gpios = <&gpio1 5 0>;
//                        linux,code = <114>; /* KEY_VOLUMEDOWN */
//                };
//	};

        mxcfb1: fb@0 {
                compatible = "fsl,mxc_sdc_fb";
                disp_dev = "hdmi";
                interface_pix_fmt = "RGB24";
                mode_str ="1920x1080M@60";
                default_bpp = <24>;
                int_clk = <0>;
                late_init = <0>;
                status = "okay";
        };

        mxcfb2: fb@1 {
                compatible = "fsl,mxc_sdc_fb";
                disp_dev = "hdmi";
                interface_pix_fmt = "RGB24";
                mode_str ="1920x1080M@60";
                default_bpp = <24>;
                int_clk = <0>;
                late_init = <0>;
                status = "disabled";
        };

        mxcfb3: fb@2 {
                compatible = "fsl,mxc_sdc_fb";
                disp_dev = "hdmi";
                interface_pix_fmt = "RGB24";
                mode_str ="1920x1080M@60";
                default_bpp = <24>;
                int_clk = <0>;
                late_init = <0>;
                status = "disabled";
        };

        mxcfb4: fb@3 {
                compatible = "fsl,mxc_sdc_fb";
                disp_dev = "hdmi";
                interface_pix_fmt = "RGB24";
                mode_str ="1920x1080M@60";
                default_bpp = <24>;
                int_clk = <0>;
                late_init = <0>;
                status = "disabled";
        };

        lcd@0 {
                compatible = "fsl,lcd";
                ipu_id = <0>;
                disp_id = <0>;
                default_ifmt = "RGB565";
                pinctrl-names = "default";
                pinctrl-0 = <&pinctrl_ipu1_1>;
                status = "disabled";
        };

        lvds_cabc_ctrl {
                lvds0-gpios = <&gpio6 15 0>;
                lvds1-gpios = <&gpio6 16 0>;
        };

	regulators {
		compatible = "simple-bus";
                reg_audio: 8962_supply {
                        compatible = "regulator-fixed";
                        regulator-name = "8962-SUPPLY";
                        gpio = <&gpio4 10 0>;
                        enable-active-high;
                };

                aux_5v: aux5v {
                        compatible = "regulator-fixed";
                        regulator-name = "AUX_5V";
                        regulator-min-microvolt = <5000000>;
                        regulator-max-microvolt = <5000000>;
                        gpio = <&gpio6 10 1>;
                        regulator-boot-on;
                        enable-active-high;
                };

                reg_usb_otg_vbus: usb_otg_vbus {
                        compatible = "regulator-fixed";
                        regulator-name = "usb_otg_vbus";
                        regulator-min-microvolt = <5000000>;
                        regulator-max-microvolt = <5000000>;
                        enable-active-high;
                };

                reg_usb_h1_vbus: usb_h1_vbus {
                        compatible = "regulator-fixed";
                        regulator-name = "usb_h1_vbus";
                        regulator-min-microvolt = <5000000>;
                        regulator-max-microvolt = <5000000>;
                        startup-delay-us = <2>; /* USB2415 requires a POR of 1 us minimum */
                        enable-active-high;
                };

                reg_sensor: sensor_supply {
                        compatible = "regulator-fixed";
                        regulator-name = "sensor-SUPPLY";
                        enable-active-high;
                };
	};

	codec: vt1613 {
		compatible = "wlf,vt1613";
		amic-mono;
       };

	sound {
		compatible = "fsl,imx6q-udoo-vt1613",
			   "fsl,imx-audio-vt1613";
		model = "vt1613-audio";
		ssi-controller = <&ssi1>;
		audio-codec = <&codec>;
		audio-routing =
			"Headphone Jack", "HPOUTL",
			"Headphone Jack", "HPOUTR",
			"Ext Spk", "SPKOUTL",
			"Ext Spk", "SPKOUTR",
			"MICBIAS", "AMIC",
			"IN3R", "MICBIAS",
			"DMIC", "MICBIAS",
			"DMICDAT", "DMIC";
		mux-int-port = <1>;
		mux-ext-port = <6>;
	};
//		hp-det-gpios = <&gpio7 8 1>;
//		mic-det-gpios = <&gpio1 9 1>;

	sound-hdmi {
		compatible = "fsl,imx6q-audio-hdmi",
			     "fsl,imx-audio-hdmi";
		model = "imx-audio-hdmi";
		hdmi-controller = <&hdmi_audio>;
	};

	sound-spdif {
		compatible = "fsl,imx-audio-spdif",
			   "fsl,imx-sabreauto-spdif";
		model = "imx-spdif";
		spdif-controller = <&spdif>;
		spdif-in;
		status = "disabled";
	};

	v4l2_cap_0 {
		compatible = "fsl,imx6q-v4l2-capture";
		ipu_id = <0>;
		csi_id = <0>;
		mclk_source = <0>;
		status = "okay";
	};

	v4l2_cap_1 {
		compatible = "fsl,imx6q-v4l2-capture";
		ipu_id = <0>;
		csi_id = <1>;
		mclk_source = <0>;
		status = "okay";
	};

	v4l2_out {
		compatible = "fsl,mxc_v4l2_output";
		status = "okay";
	};
};

&audmux {
	pinctrl-names = "default";
	pinctrl-0 = <&pinctrl_audmux_4>;
	status = "okay";
};

&ecspi1 {
	fsl,spi-num-chipselects = <1>;
	cs-gpios = <&gpio3 19 0>;
	pinctrl-names = "default";
	pinctrl-0 = <&pinctrl_ecspi1_1>;

	flash: m25p80@0 {
		#address-cells = <1>;
		#size-cells = <1>;
		compatible = "st,m25p32";
		spi-max-frequency = <20000000>;
		reg = <0>;
	};
};

&fec {
	pinctrl-names = "default";
	pinctrl-0 = <&pinctrl_enet_1>;
	driver-can-reset = "no";
	phy-mode = "rgmii";
	phy-poweron = <&gpio2 31 0>;
	phy-reset-gpio = <&gpio3 23 0>;
	phy-clk125-en = <&gpio6 24 1>;
	phy-mode0 = <&gpio6 29 1>;
	phy-mode1 = <&gpio6 28 1>;
	phy-mode2 = <&gpio6 27 1>;
	phy-mode3 = <&gpio6 25 1>;
	status = "okay";
};

&gpc {
	fsl,cpu_pupscr_sw2iso = <0xf>;
	fsl,cpu_pupscr_sw = <0xf>;
	fsl,cpu_pdnscr_iso2sw = <0x1>;
	fsl,cpu_pdnscr_iso = <0x1>;
};

&hdmi_audio {
	status = "okay";
};

&hdmi_cec {
	pinctrl-names = "default";
	pinctrl-0 = <&pinctrl_hdmi_cec_1>;
	status = "okay";
};

&hdmi_core {
	ipu_id = <0>;
	disp_id = <1>;
	status = "okay";
};

&hdmi_video {
	fsl,phy_reg_vlev = <0x0294>;
	fsl,phy_reg_cksymtx = <0x800d>;
	status = "okay";
};

&i2c1 {
	clock-frequency = <100000>;
	pinctrl-names = "default";
	pinctrl-0 = <&pinctrl_i2c1_2>;
	status = "okay";
};

&i2c2 {
	clock-frequency = <100000>;
	pinctrl-names = "default";
	pinctrl-0 = <&pinctrl_i2c2_2>;
	status = "okay";

	egalax_ts@04 {
		compatible = "eeti,egalax_ts";
		reg = <0x04>;
		interrupt-parent = <&gpio2>;
		interrupts = <28 2>;
		wakeup-gpios = <&gpio2 28 0>;
	};

	hdmi: edid@50 {
		compatible = "fsl,imx6-hdmi-i2c";
		reg = <0x50>;
	};
};

&i2c3 {
	pinctrl-names = "default";
	pinctrl-0 = <&pinctrl_i2c3_5>;
	status = "okay";
};

&iomuxc {
	pinctrl-names = "default";
	pinctrl-0 = <&pinctrl_hog>;

	hog {
		pinctrl_hog: hoggrp {
			fsl,pins = <
				MX6QDL_PAD_GPIO_0__GPIO1_IO00     0x80000000
				MX6QDL_PAD_GPIO_1__GPIO1_IO01     0x80000000
				MX6QDL_PAD_GPIO_2__GPIO1_IO02     0x80000000
				MX6QDL_PAD_GPIO_3__GPIO1_IO03     0x30B1
				MX6QDL_PAD_GPIO_4__GPIO1_IO04     0x80000000
				MX6QDL_PAD_GPIO_7__GPIO1_IO07     0x80000000
				MX6QDL_PAD_GPIO_8__GPIO1_IO08     0x80000000
				MX6QDL_PAD_GPIO_9__GPIO1_IO09     0x80000000
				MX6QDL_PAD_SD2_DAT2__GPIO1_IO13   0x34B1
				MX6QDL_PAD_SD2_DAT0__GPIO1_IO15   0x80000000
				MX6QDL_PAD_SD1_DAT0__GPIO1_IO16   0x80000000
				MX6QDL_PAD_SD1_DAT1__GPIO1_IO17   0x80000000
				MX6QDL_PAD_SD1_CMD__GPIO1_IO18    0x80000000
				MX6QDL_PAD_SD1_DAT2__GPIO1_IO19   0x80000000
				MX6QDL_PAD_SD1_CLK__GPIO1_IO20    0x80000000
				MX6QDL_PAD_SD1_DAT3__GPIO1_IO21   0x80000000
				MX6QDL_PAD_ENET_TX_EN__GPIO1_IO28 0x80000000
				MX6QDL_PAD_NANDF_D0__GPIO2_IO00   0x80000000
				MX6QDL_PAD_NANDF_D1__GPIO2_IO01   0x80000000
				MX6QDL_PAD_NANDF_D2__GPIO2_IO02   0x80000000
				MX6QDL_PAD_NANDF_D3__GPIO2_IO03   0x80000000
				MX6QDL_PAD_NANDF_D4__GPIO2_IO04   0x80000000
				MX6QDL_PAD_NANDF_D5__GPIO2_IO05   0x80000000
				MX6QDL_PAD_SD4_DAT0__GPIO2_IO08   0x80000000
				MX6QDL_PAD_SD4_DAT1__GPIO2_IO09   0x80000000
				MX6QDL_PAD_SD4_DAT2__GPIO2_IO10   0x80000000
				MX6QDL_PAD_SD4_DAT7__GPIO2_IO15   0x80000000
				MX6QDL_PAD_EIM_A22__GPIO2_IO16    0x80000000
				MX6QDL_PAD_EIM_A21__GPIO2_IO17    0x80000000
				MX6QDL_PAD_EIM_A20__GPIO2_IO18    0x80000000
				MX6QDL_PAD_EIM_A19__GPIO2_IO19    0x80000000
				MX6QDL_PAD_EIM_A18__GPIO2_IO20    0x80000000
				MX6QDL_PAD_EIM_A17__GPIO2_IO21    0x80000000
				MX6QDL_PAD_EIM_A16__GPIO2_IO22    0x80000000
				MX6QDL_PAD_EIM_CS0__GPIO2_IO23    0x80000000
				MX6QDL_PAD_EIM_CS1__GPIO2_IO24    0x80000000
				MX6QDL_PAD_EIM_OE__GPIO2_IO25     0x80000000
				MX6QDL_PAD_EIM_EB2__GPIO2_IO30    0x80000000
				MX6QDL_PAD_EIM_EB3__GPIO2_IO31    0x80000000
				MX6QDL_PAD_EIM_D19__GPIO3_IO19    0x80000000
				MX6QDL_PAD_EIM_D23__GPIO3_IO23    0x80000000
				MX6QDL_PAD_EIM_D24__GPIO3_IO24    0x80000000
				MX6QDL_PAD_EIM_D25__GPIO3_IO25    0x80000000
				MX6QDL_PAD_GPIO_19__GPIO4_IO05    0x80000000
				MX6QDL_PAD_KEY_COL0__GPIO4_IO06   0x80000000
				MX6QDL_PAD_KEY_ROW0__GPIO4_IO07   0x80000000
				MX6QDL_PAD_KEY_COL1__GPIO4_IO08   0x80000000
				MX6QDL_PAD_KEY_ROW1__GPIO4_IO09   0x80000000
				MX6QDL_PAD_DISP0_DAT0__GPIO4_IO21 0x30B1
				MX6QDL_PAD_DISP0_DAT5__GPIO4_IO26 0x80000000
				MX6QDL_PAD_DISP0_DAT6__GPIO4_IO27 0x80000000
				MX6QDL_PAD_DISP0_DAT7__GPIO4_IO28 0x80000000
				MX6QDL_PAD_DISP0_DAT8__GPIO4_IO29 0x80000000
				MX6QDL_PAD_DISP0_DAT9__GPIO4_IO30 0x80000000
				MX6QDL_PAD_DISP0_DAT10__GPIO4_IO31        0x80000000
				MX6QDL_PAD_EIM_WAIT__GPIO5_IO00   0xB0B1
				MX6QDL_PAD_EIM_A25__GPIO5_IO02    0x80000000
				MX6QDL_PAD_EIM_A24__GPIO5_IO04    0x80000000
				MX6QDL_PAD_DISP0_DAT11__GPIO5_IO05        0x80000000
				MX6QDL_PAD_DISP0_DAT12__GPIO5_IO06        0x80000000
				MX6QDL_PAD_DISP0_DAT13__GPIO5_IO07        0x80000000
				MX6QDL_PAD_DISP0_DAT14__GPIO5_IO08        0x80000000
				MX6QDL_PAD_DISP0_DAT15__GPIO5_IO09        0x80000000
				MX6QDL_PAD_DISP0_DAT16__GPIO5_IO10        0x80000000
				MX6QDL_PAD_DISP0_DAT17__GPIO5_IO11        0x80000000
				MX6QDL_PAD_DISP0_DAT18__GPIO5_IO12        0x80000000
				MX6QDL_PAD_DISP0_DAT19__GPIO5_IO13        0x80000000
				MX6QDL_PAD_DISP0_DAT20__GPIO5_IO14        0x80000000
				MX6QDL_PAD_DISP0_DAT21__GPIO5_IO15        0x80000000
				MX6QDL_PAD_DISP0_DAT22__GPIO5_IO16        0x80000000
				MX6QDL_PAD_DISP0_DAT23__GPIO5_IO17        0x80000000
				MX6QDL_PAD_CSI0_PIXCLK__GPIO5_IO18        0x80000000
				MX6QDL_PAD_CSI0_DAT4__GPIO5_IO22  0x80000000
				MX6QDL_PAD_CSI0_DAT10__GPIO5_IO28 0x80000000
				MX6QDL_PAD_CSI0_DAT11__GPIO5_IO29 0x80000000
				MX6QDL_PAD_CSI0_DAT13__GPIO5_IO31 0x80000000
				MX6QDL_PAD_CSI0_DAT12__GPIO5_IO30 0x80000000
				MX6QDL_PAD_CSI0_DAT14__GPIO6_IO00 0x80000000
				MX6QDL_PAD_CSI0_DAT15__GPIO6_IO01 0x80000000
				MX6QDL_PAD_CSI0_DAT16__GPIO6_IO02 0x80000000
				MX6QDL_PAD_CSI0_DAT17__GPIO6_IO03 0x80000000
				MX6QDL_PAD_CSI0_DAT18__GPIO6_IO04 0x80000000
				MX6QDL_PAD_CSI0_DAT19__GPIO6_IO05 0x80000000
				MX6QDL_PAD_EIM_A23__GPIO6_IO06    0x80000000
				MX6QDL_PAD_NANDF_CS0__GPIO6_IO11  0x80000000
				MX6QDL_PAD_RGMII_RX_CTL__GPIO6_IO24       0x80000000
				MX6QDL_PAD_RGMII_RD0__GPIO6_IO25  0x80000000
				MX6QDL_PAD_RGMII_RD1__GPIO6_IO27  0x80000000
				MX6QDL_PAD_RGMII_RD2__GPIO6_IO28  0x80000000
				MX6QDL_PAD_RGMII_RD3__GPIO6_IO29  0x80000000
				MX6QDL_PAD_SD3_DAT5__GPIO7_IO00   0x80000000
				MX6QDL_PAD_GPIO_16__GPIO7_IO11    0x80000000
				MX6QDL_PAD_GPIO_17__GPIO7_IO12    0x80000000
				MX6QDL_PAD_GPIO_18__GPIO7_IO13    0x80000000
				MX6QDL_PAD_NANDF_CS2__CCM_CLKO2   0x130b0
			>;
		};
	};
};

&ldb {
	ipu_id = <1>;
	disp_id = <0>;
	ext_ref = <1>;
	mode = "sep0";
	sec_ipu_id = <1>;
	sec_disp_id = <1>;
	status = "okay";
};

&mipi_csi {
	status = "okay";
	ipu_id = <0>;
	csi_id = <1>;
	v_channel = <0>;
	lanes = <1>;
};

&pwm3 {
	pinctrl-names = "default";
	pinctrl-0 = <&pinctrl_pwm3_1>;
	status = "disabled";
};

&spdif {
	pinctrl-names = "default";
	pinctrl-0 = <&pinctrl_spdif_1>;
	status = "disabled";
};

&ssi1 {
	fsl,mode = "ac97-slave";
		codec-handle = <1>;
		ac97-reset = <&gpio2 30 0>;
	status = "okay";
};

//	status = "disabled";
//	status = "okay";

&gpmi {
	pinctrl-names = "default";
	pinctrl-0 = <&pinctrl_gpmi_nand_1>;
	status = "disabled"; /* pin conflict with uart3 */
};

&uart4 {
	pinctrl-names = "default";
	pinctrl-0 = <&pinctrl_uart4_1>;
	status = "disabled";
};

&usbh1 {
	vbus-supply = <&reg_usb_h1_vbus>;
	status = "okay";
};

&usbotg {
	vbus-supply = <&reg_usb_otg_vbus>;
	pinctrl-names = "default";
	status = "okay";
};
//	pinctrl-0 = <&pinctrl_usbotg_2>;

&usdhc3 {
	pinctrl-names = "default", "state_100mhz", "state_200mhz";
	pinctrl-0 = <&pinctrl_usdhc3_1>;
	pinctrl-1 = <&pinctrl_usdhc3_1_100mhz>;
	pinctrl-2 = <&pinctrl_usdhc3_1_200mhz>;
	cd-gpios = <&gpio7 0 0>;
	bus-width = <4>;
	keep-power-in-suspend;
	enable-sdio-wakeup;
	no-1-8-v;
	status = "okay";
};

&weim {
	pinctrl-names = "default";
	pinctrl-0 = <&pinctrl_weim_nor_1 &pinctrl_weim_cs0_1>;
	#address-cells = <2>;
	#size-cells = <1>;
	ranges = <0 0 0x08000000 0x08000000>;
	status = "disabled"; /* pin conflict with ecspi1, i2c3 and uart3 */

	nor@0,0 {
		compatible = "cfi-flash";
		reg = <0 0 0x02000000>;
		#address-cells = <1>;
		#size-cells = <1>;
		bank-width = <2>;
		fsl,weim-cs-timing = <0x00620081 0x00000001 0x1c022000
				0x0000c000 0x1404a38e 0x00000000>;
	};
};
